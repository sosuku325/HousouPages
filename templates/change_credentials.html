<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ユーザー情報の変更</title>
</head>
<body>
    <div style="text-align: right;">
        {{ current_user.username }}でログイン中 |
        <a href="{{ url_for('requests_list') }}">リクエスト一覧</a> |
        <a href="{{ url_for('logout') }}">ログアウト</a>
    </div>

    <h1>ユーザー名・パスワードの変更</h1>

    <form method="POST">
        <label>新しいユーザー名：<input type="text" name="new_username" required></label><br>
        <label>新しいパスワード：<input type="password" name="new_password" required></label><br>
        <label>現在のパスワード確認：<input type="password" name="current_password" required></label><br>
        <button type="submit">変更する</button>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
            {% for category, message in messages %}
                <li class="{{ 'danger' if category == 'danger' else 'success' }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
</body>
</html>
